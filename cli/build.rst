*********************************
Команды для сборки CordJS-проекта
*********************************

.. _cli-build:

Команда ``build``
=================

Основная команда для сборки CordJS проекта --- ``cordjs build``. В простейшем виде она именно так и вызывается из
корня проекта, осуществляет полную сборку проекта в папке ``target`` и завершает работу. Однако, команда поддерживает
много дополнительных опций, которые можно всегда подсмотреть вызвав:

.. code-block:: bash

  cordjs build --help

Ниже подробное описание опций:

* ``-o, --out <dir>`` --- директория, в которую будет осуществляться сборка проекта. По умолчанию это папка
  ``target`` в корне проекта. Директория задаётся относительно корня проекта. Использовать эту опцию и изменять папку
  по умолчанию не рекомендуется.

* ``-C, --clean`` --- удалить директорию ``target``, прежде чем начинать сборку. По умолчанию, если ``target``
  не очистить, то компилируются только изменённые файлы. Иногда такое поведение приводит к нецелостности сборки и
  требуется собрать проект полностью заново. В процессе разработки/отладки рекомендуется использовать эту опцию только
  по необходимости, поскольку этоу существенно увеличивает время сборки проекта.

* ``-A, --app <file>`` --- название файла конфигураци приложения, который определяет набор включённых бандлов, в папке
  ``public/app`` без расширения. Значение по умолчанию ``application``. Опцию необходимо использовать для сборки
  альтернативного приложения, если в рамках проекта разрабатывается сразу несколько приложений (например, десктопное
  и мобильное).

* ``-I, --index <widget-path>`` --- абсолютный канонический путь к виджету, из которого соберётся файл ``index.html`` в
  папке ``public``. Эту опцию следует использовать в случае сборки мобильного приложения (для phonegap) или для
  работы CordJS-приложения в режиме SPA (без использования возможностей серверного рендеринга).

* ``-w, --watch`` --- при использовании этой опции после завершения сборки утилита не завершает свою работу, а
  подписывается на изменение исходных файлов и автоматически пересобирает любой изменившийся файл. В режиме
  разработки это очень удобно, особенно в контексте команда ``run``.

* ``-m, --map`` --- генерировать source-map файлы для coffee-script исходников.

* ``-c, --config <name>`` --- название конфигурационного js-файла с глобальными настройками приложения. В команде
  ``build`` эта опция действует тольк в сочетании с ``-I, --index``, поскольку используется в процессе рендера
  шаблона виджета. Значение задаётся либо в виде относительного имени файла в папке ``conf`` (по умолчанию ---
  ``default``), либо в виде абсолютного пути.


Команда ``buildIndex``
======================

``cordjs buildIndex`` --- отдельная команда для генерации файла ``index.html`` для SPA-режима. Поддерживает опции
``-o``, ``-I`` и ``-c``, абсолютно аналогичные команде ``build``.


Команда ``clean``
=================

``cordjs clean`` выполняет очистку сборки проекта (таргет-директорию). Аналогична опции ``-C`` команды ``build``.
Поддерживает только опцию ``-o, --out``.
